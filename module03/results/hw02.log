NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

937  
938  * hw02.sas
939    written by Steve Simon
940    2019-07-08;
941  
942  ********* ********* ********* *********
943  1. Homework 02 (1 / 4)
944  
945  The Gardasil vaccine requires three
946  shots in order to be effective. A study
947  conducted at Johns Hopkins looked at
948  how often patients failed to get all
949  three shots. They wanted to see if
950  insurance status, age, and other
951  factors could predict who was at
952  greatest risk for failing to get all
953  three shots.
954  ********* ********* ********* *********;
955  
956  
957  
958  ********* ********* ********* *********
959  2. Homework 02 (2 / 4)
960  
961  The data set is available as an Excel
962  spreadsheet at
963  
964    http://www.amstat.org/publications/jse/v19n1/gardasil.xls
965  
966  and a description of the file is available at
967  
968    http://www.amstat.org/publications/jse/v19n1/gardasil.txt
969  ********* ********* ********* *********;
970  
971  
972  ********* ********* ********* *********
973  3. Homework 02 (3 / 4)
974  
975  Q1. Create factors for AgeGroup, Race,
976  Completed, Location.
977  
978  Q2. Report which variables have missing data and
979  how many of these values are missing.
980  
981  Q3. What proportion of patients completed all
982  three shots?
983  ********* ********* ********* *********;
984  
985  
986  
987  ********* ********* ********* *********
988  4. Homework 02 (4 / 4)
989  
990  Q4. Draw a bar chart showing the percentage of
991  patients at each of the four locations.
992  
993  Q5. Use a crosstabulation to compare Age to
994  AgeGroup, and Location to LocationType. Are
995  the recodings into AgeGroup and LocationType
996  done properly?
997  
998  Q6. Create a new variable that combines the race
999  categories into white, and non-white. Calculate
1000  the proportion of white patients at each of the
1001  four locations.
1002  ********* ********* ********* *********;
1003  
1004  
1005  
1006  ********* ********* ********* *********
1007  5. Output and data locations
1008  
1009  This is the first few lines of SAS
1010  code, showing where to store the
1011  output, where to find the input and
1012  where to store the SAS binary data set
1013  the program creates.
1014  ********* ********* ********* *********;
1015  
1016  ods pdf
1017    file="hw02.pdf";
1018  
1019  filename raw_data
1020    "../data/gardasil.csv";
1021  
1022  libname intro
1023    "../data";
NOTE: Libref INTRO was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Users\simons\Documents\SASUniversityEdition\myfolders\introduction-to-sas\part2\data
1024  
1025  ********* ********* ********* *********
1026  6. Reading, proc import
1027  
1028  You should think about proc import here
1029  because the names of the variables are
1030  in the first row of data and there is
1031  nothing too unusual going on.
1032  ********* ********* ********* *********;
1033  
1034  proc import
1035      datafile=raw_data
1036      out=intro.gardasil
1037      dbms=dlm
1038      replace;
1039    delimiter=',';
1040    getnames=yes;
1041  run;

1042   /**********************************************************************
1043   *   PRODUCT:   SAS
1044   *   VERSION:   9.4
1045   *   CREATOR:   External File Interface
1046   *   DATE:      09JUL19
1047   *   DESC:      Generated SAS Datastep Code
1048   *   TEMPLATE SOURCE:  (None Specified.)
1049   ***********************************************************************/
1050      data INTRO.GARDASIL    ;
1051      %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
1052      infile RAW_DATA delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
1053         informat Age best32. ;
1054         informat AgeGroup best32. ;
1055         informat Race best32. ;
1056         informat Shots best32. ;
1057         informat Completed best32. ;
1058         informat InsuranceType best32. ;
1059         informat MedAssist best32. ;
1060         informat Location best32. ;
1061         informat LocationType best32. ;
1062         informat PracticeType best32. ;
1063         format Age best12. ;
1064         format AgeGroup best12. ;
1065         format Race best12. ;
1066         format Shots best12. ;
1067         format Completed best12. ;
1068         format InsuranceType best12. ;
1069         format MedAssist best12. ;
1070         format Location best12. ;
1071         format LocationType best12. ;
1072         format PracticeType best12. ;
1073      input
1074                  Age
1075                  AgeGroup
1076                  Race
1077                  Shots
1078                  Completed
1079                  InsuranceType
1080                  MedAssist
1081                  Location
1082                  LocationType
1083                  PracticeType
1084      ;
1085      if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
1086      run;

NOTE: The infile RAW_DATA is:
      Filename=C:\Users\simons\Documents\SASUniversityEdition\myfolders\introduction-to-sas\part2\data\gardasil.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=31180,
      Last Modified=05Jun2019:14:27:37,
      Create Time=05Jun2019:14:27:37

NOTE: 1413 records were read from the infile RAW_DATA.
      The minimum record length was 20.
      The maximum record length was 20.
NOTE: The data set INTRO.GARDASIL has 1413 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

1413 rows created in INTRO.GARDASIL from RAW_DATA.
  
  
  
NOTE: INTRO.GARDASIL data set was successfully created.
NOTE: The data set INTRO.GARDASIL has 1413 observations and 10 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.26 seconds
      cpu time            0.09 seconds
      

1087  
1088  ********* ********* ********* *********
1089  7. First ten lines, proc print
1090  
1091  If you look at the first few rows of
1092  data, you will see that the import went
1093  reasonably well.
1094  ********* ********* ********* *********;
1095  
1096  proc print
1097      data=intro.gardasil(obs=10);
1098    title1 " ";
1099  run;

NOTE: There were 10 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

1100  
1101  
1102  ********* ********* ********* *********
1103  Q1. Create factors for AgeGroup, Race,
1104  Completed, Location.
1105  
1106  If you go to the website, you'll find
1107  the following information:
1108  
1109  AgeGroup = the age group in which the
1110  patient falls (0 = 11-17 years, 1 =
1111  18-26 years)
1112  
1113  Race = the patient's race (0 = white,
1114  1 = black, 2 = Hispanic, 3 =
1115  other/unknown)
1116  
1117  Completed = did the patient complete
1118  the three-shot regimen within the
1119  recommended period of 12 months
1120  (0 = no, 1 = yes)
1121  
1122  Location = the clinic that the patient
1123  attended (1 = Odenton, 2 = White Marsh,
1124  3 = Johns Hopkins Outpatient Center,
1125  4 = Bayview)
1126  ********* ********* ********* *********;
1127  
1128  proc format;
1129    value f_age
1130      0 = "11-17 years"
1131      1 = "18-26 years";
NOTE: Format F_AGE is already on the library WORK.FORMATS.
NOTE: Format F_AGE has been output.
1132    value f_race
1133      0 = "White"
1134      1 = "Black"
1135      2 = "Hispanic"
1136      3 = "Other/unknown";
NOTE: Format F_RACE is already on the library WORK.FORMATS.
NOTE: Format F_RACE has been output.
1137    value f_completed
1138      0 = "No"
1139      1 = "Yes";
NOTE: Format F_COMPLETED is already on the library WORK.FORMATS.
NOTE: Format F_COMPLETED has been output.
1140    value f_location
1141      1 = "Odenton"
1142      2 = "White Marsh"
1143      3 = "Johns Hopkins Outpatient Center"
1144      4 = "Bayview";
NOTE: Format F_LOCATION is already on the library WORK.FORMATS.
NOTE: Format F_LOCATION has been output.
1145  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

1146  
1147  ********* ********* ********* *********
1148  Display the formatted variables
1149  
1150  There are several ways you can
1151  demonstrate that you coded the
1152  variables properly. Getting frequency
1153  counts with proc freq is about as easy
1154  as anything.
1155  ********* ********* ********* *********;
1156  
1157  proc freq
1158      data=intro.gardasil;
1159    tables AgeGroup Race Completed Location;
1160    format
1161      AgeGroup f_age.
1162      Race f_race.
1163      Completed f_completed.
1164      Location f_location.;
1165  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

1166  
1167  ********* ********* ********* *********
1168  Q2. Report which variables have missing data and
1169  how many of these values are missing.
1170  
1171  To get the missing value count for a
1172  continuous variable, include the nmiss
1173  option in proc means or the missing
1174  option in proc freq.
1175  ********* ********* ********* *********;
1176  
1177  proc means
1178      n nmiss
1179      data=intro.gardasil;
1180    var Age--PracticeType;
1181  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.11 seconds
      cpu time            0.01 seconds
      

1182  
1183  proc freq
1184      data=intro.gardasil;
1185    tables AgeGroup--PracticeType / missing;
1186  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.14 seconds
      cpu time            0.04 seconds
      

1187  
1188  ********* ********* ********* *********
1189  Q3. What proportion of patients completed all
1190  three shots?
1191  
1192  You've already run this table, but let's
1193  run it again anyway.
1194  ********* ********* ********* *********;
1195  
1196  proc freq
1197      data=intro.gardasil;
1198    tables Completed;
1199    format Completed f_completed.;
1200  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

1201  
1202  ********* ********* ********* *********
1203  Q4. Draw a bar chart showing the percentage of
1204  patients at each of the four locations.
1205  
1206  You need to create a new data set
1207  through the output= option on the
1208  tables statement in proc freq.
1209  ********* ********* ********* *********;
1210  
1211  proc freq
1212      data=intro.gardasil;
1213    tables location /
1214      noprint out=location_percentages;
1215  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: The data set WORK.LOCATION_PERCENTAGES has 4 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.26 seconds
      cpu time            0.01 seconds
      

1216  
1217  proc print
1218      data=location_percentages;
1219  run;

NOTE: There were 4 observations read from the data set WORK.LOCATION_PERCENTAGES.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

1220  
1221  proc sgplot
1222      data=intro.gardasil;
1223    vbar location / response=percentage;
ERROR: Variable PERCENTAGE not found.
1224  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      
1225  
1226  ********* ********* ********* *********
1227  Q5. Use a crosstabulation to compare Age to
1228  AgeGroup, and Location to LocationType. Are
1229  the recodings into AgeGroup and LocationType
1230  done properly?
1231  
1232  For these tables, you can use counts
1233  alone. You don't need row percents,
1234  column percents, or cell percents.
1235  ********* ********* ********* *********;
1236  


1237  proc freq
1238      data=intro.gardasil;
1239    tables
1240      Age*AgeGroup
1241      Location*LocationType /
1242        norow nocol nopercent;
1243  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.13 seconds
      cpu time            0.04 seconds
      

1244  
1245  ********* ********* ********* *********
1246  Q6. Create a new variable that combines the race
1247  categories into white, and non-white. Calculate
1248  the proportion of white patients at each of the
1249  four locations.
1250  ********* ********* ********* *********;
1251  
1252  data recode;
1253    set intro.gardasil;
1254    if Race=0
1255      then white="Yes";
1256      else white="No ";
1257  run;

NOTE: There were 1413 observations read from the data set INTRO.GARDASIL.
NOTE: The data set WORK.RECODE has 1413 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1258  
1259  proc freq
1260      data=recode;
1261    tables Location*white /
1262      nocol nopercent;
1263  run;

NOTE: There were 1413 observations read from the data set WORK.RECODE.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

1264  
1265  ********* ********* ********* *********;
1266  
1267  ods pdf close;
NOTE: ODS PDF printed 24 pages to 
      C:\Users\simons\Documents\SASUniversityEdition\myfolders\introduction-to-sas\part2\src\hw02.pdf.
1268  
1269  
1270  proc printto; run;

