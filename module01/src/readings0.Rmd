---
title: "Readings for week 0"
author: "Steve Simon"
output:
  pdf_document: default
  html_document: default
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding,
  output_dir = "../results", output_format = "all") })  
---

This list of readings was created by Steve Simon using bibtex and R Markdown on 2019-06-10 and last updated on `r Sys.Date()`.

Note: these readings are recommended, but not required.

```{r echo=FALSE}
source(file="prelims.R", echo=FALSE)
suppressMessages(suppressWarnings(library(tidyverse)))
bib_path <- "../readings/"
```

```{r echo=FALSE}
bib_files <- list.files(path=bib_path, pattern="*.bib")
txt_full <- NULL
for (f in bib_files) {
  txt_full <- append(txt_full, readLines(paste0(bib_path, f)))
}
remove_ch <- function(txt, ch, fixed_flag=FALSE) {
  gsub(ch, "", txt, fixed=fixed_flag)
}
select_txt <- function(txt, lab) {
  txt %>%
    grep(lab, ., value=TRUE) %>%
    remove_ch('"', fixed=TRUE) %>%
    remove_ch('^\\s*') %>%
    remove_ch(paste0("^",lab)) %>%
    remove_ch(' = \\{') %>%
    remove_ch('\\}') %>%
    remove_ch('\\s*$') %>%
    remove_ch(',$') %>%
    return
}
txt_authors <- select_txt(txt_full, "author")
txt_titles <- select_txt(txt_full, "title")
txt_html <- select_txt(txt_full, "html")
txt_pdf <- select_txt(txt_full, "pdf")
prefix_all <- "Available in "
prefix_html <- ifelse(nchar(txt_html)==0, "", "[html format](")
postfix_html <- ifelse(nchar(txt_html)==0, "", ")")
conjunction <- ifelse(nchar(txt_html)==0 | nchar(txt_pdf)==0, "", " and ")
prefix_pdf <- ifelse(nchar(txt_pdf)==0, "", "[pdf format](")
postfix_pdf <- ifelse(nchar(txt_pdf)==0, ".", ").")
prefix_all %>%
  paste0(prefix_html) %>%
  paste0(txt_html) %>%
  paste0(postfix_html) %>%
  paste0(conjunction) %>%
  paste0(prefix_pdf) %>%
  paste0(txt_pdf) %>%
  paste0(postfix_pdf) -> txt_link
bib_files %>%
  sub(".bib", "", .) -> bib_names
divider <- paste0(rep("=", 50), collapse="")
"![](" %>%
  paste0(bib_path) %>%
  paste0(bib_names) %>%
  paste0(".png)") %>%
  paste0("\n\n## ") %>%
  paste0(txt_authors) %>%
  paste0(". ") %>%
  paste0(txt_titles) %>%
  paste0(". ") %>%
  paste0(txt_link) %>%
  paste0("\n\n## ") %>%
  paste0(divider) %>%
  paste0(collapse="\n\n") -> bib_output
```

## `r divider`

`r bib_output`.

